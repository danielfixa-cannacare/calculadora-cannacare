<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CannaCare - Gest√£o Profissional</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #4a148c; --secondary: #7b1fa2; --accent-orange: #ff9800; --accent-green: #43a047; --bg-body: #f4f7f6; --text-main: #333; --white: #ffffff; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-body); margin: 0; display: flex; justify-content: center; color: var(--text-main); }
        .app-container { width: 100%; max-width: 480px; background: var(--white); min-height: 100vh; box-shadow: 0 10px 30px rgba(0,0,0,0.1); display: flex; flex-direction: column; }
        .app-header { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 30px 20px; text-align: center; border-bottom-left-radius: 25px; border-bottom-right-radius: 25px; }
        .app-header h1 { margin: 0; font-size: 24px; letter-spacing: 1px; }
        .app-header p { margin: 5px 0 0; font-size: 14px; opacity: 0.9; }
        .tab-bar { display: flex; margin: -20px 20px 10px; background: #eee; border-radius: 12px; padding: 5px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .tab { flex: 1; padding: 12px; text-align: center; cursor: pointer; border-radius: 10px; font-size: 14px; font-weight: 600; color: #666; transition: 0.3s; }
        .tab.active { background: var(--white); color: var(--primary); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .content { padding: 20px; flex-grow: 1; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .card { background: #fdfdfd; border: 1px solid #eee; border-radius: 15px; padding: 15px; margin-bottom: 20px; }
        .card-purple { border: 1px solid #e1bee7; background: #f3e5f5; }
        .input-group { margin-bottom: 12px; }
        label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 11px; color: #777; text-transform: uppercase; }
        select, input { width: 100%; padding: 14px; border: 1.5px solid #eee; border-radius: 10px; font-size: 14px; background: #fff; color: #333; outline: none; box-sizing: border-box; }
        .row { display: flex; gap: 10px; }
        .row > div { flex: 1; }
        .btn { width: 100%; padding: 16px; border: none; border-radius: 12px; font-size: 15px; font-weight: 700; cursor: pointer; transition: 0.3s; color: white; margin-top: 5px; }
        .btn-orange { background: var(--accent-orange); }
        .btn-green { background: var(--accent-green); }
        .result-box { margin-top: 15px; padding: 15px; border-radius: 12px; display: none; font-size: 15px; text-align: center; }
        .res-stock { background: #fff8e1; border: 1px solid #ffe082; }
        .res-dose { background: #e8f5e9; border: 1px solid #c8e6c9; }
        .res-title { font-weight: 700; font-size: 16px; margin-bottom: 5px; color: #333; }
        .res-value { font-size: 20px; color: var(--primary); font-weight: 800; }
        .alerta-container { margin-top: 10px; padding: 10px; background: #ffebee; border-radius: 10px; border: 1px dashed #ef5350; color: #c62828; font-weight: bold; }
        .divider { text-align: center; color: #bbb; font-size: 12px; font-weight: bold; margin: 15px 0; }
    </style>
</head>
<body>
<div class="app-container">
    <div class="app-header">
        <h1>CannaCare</h1>
        <p>Gest√£o Profissional ‚Ä¢ Tabela 2026</p>
    </div>
    <div class="tab-bar">
        <div class="tab active" onclick="switchTab(0)">üì¶ ESTOQUE</div>
        <div class="tab" onclick="switchTab(1)">üíß DOSAGEM</div>
    </div>
    <div class="content">
        <div id="tab0" class="tab-content active">
            <div class="card">
                <div class="input-group"><label>Marca / Produto</label><select class="brand-list" id="e_brand"></select></div>
                <div class="input-group"><label>Data de In√≠cio</label><input type="date" id="e_date_start"></div>
                <div class="row">
                    <div class="input-group"><label>Vol. (ml)</label><input type="number" id="e_vol" value="30"></div>
                    <div class="input-group"><label>Qtd Frascos</label><input type="number" id="e_qty" value="1"></div>
                </div>
                <div class="row">
                    <div class="input-group" style="flex:2"><label>Dose por Vez</label><input type="number" id="e_dose" placeholder="Ex: 10"></div>
                    <div class="input-group"><label>Unid.</label><select id="e_unit"><option value="gts">Gotas</option><option value="ml">ml</option></select></div>
                </div>
                <div class="input-group"><label>Vezes ao dia</label><input type="number" id="e_freq" value="2"></div>
            </div>
            <button class="btn btn-orange" onclick="calcStock()">CALCULAR RECOMPRA</button>
            <div id="res_stock" class="result-box res-stock"></div>
        </div>

        <div id="tab1" class="tab-content">
            <div class="card card-purple">
                <div class="input-group"><label>1. Configura√ß√£o do Frasco</label><select class="brand-list" id="d_brand"></select></div>
                <div class="input-group"><input type="number" id="d_mgt" placeholder="Total mg no frasco (Ex: 6000)"></div>
                <div class="input-group"><input type="number" id="d_vol" placeholder="Total mL no frasco (Ex: 30)"></div>
            </div>

            <div class="card">
                <label>OP√á√ÉO A: Prescri√ß√£o em mg ‚Üí Descobrir Dose</label>
                <div class="input-group"><input type="number" id="d_pres_mg" placeholder="Dose em mg (Ex: 200)"></div>
                <button class="btn btn-green" onclick="calcDoseA()">CONVERTER PARA ML/GOTAS</button>
                <div id="res_dose_a" class="result-box res-dose"></div>
            </div>

            <div class="divider">OU</div>

            <div class="card">
                <label>OP√á√ÉO B: Dose que j√° toma ‚Üí Descobrir mg</label>
                <div class="row">
                    <div class="input-group" style="flex:2"><input type="number" id="d_qty_take" placeholder="Quantidade"></div>
                    <div class="input-group"><select id="d_unit_take"><option value="gts">Gotas</option><option value="ml">ml</option></select></div>
                </div>
                <button class="btn btn-green" onclick="calcDoseB()">DESCOBRIR QUANTOS MG S√ÉO</button>
                <div id="res_dose_b" class="result-box res-dose"></div>
            </div>
        </div>
    </div>
</div>

<script>
    const brands = [
        {n: "Allandiol (15ml)", v: 40}, {n: "Allandiol (30ml)", v: 30}, {n: "ALMA LAB", v: 40},
        {n: "Bcure", v: 50}, {n: "Bluebird Botanicals", v: 40}, {n: "Cannifex", v: 40},
        {n: "CBFarma", v: 40}, {n: "Canna River", v: 47}, {n: "CBDistillery", v: 45},
        {n: "CbdMD", v: 43}, {n: "CP CANN", v: 30}, {n: "Formula Swiss", v: 29},
        {n: "Golden CBD", v: 40}, {n: "HealthMeds", v: 45}, {n: "HempMeds RSHO 9", v: 33},
        {n: "HempMeds BR 3k", v: 45}, {n: "HempMeds BR 6k", v: 50}, {n: "HempMeds Calm", v: 50},
        {n: "HempMeds Focus", v: 50}, {n: "HempMeds X Isolado", v: 50}, {n: "Lazarus", v: 38}, 
        {n: "LeafMed", v: 54}, {n: "Natyva", v: 40}, {n: "Nunature", v: 43}, 
        {n: "Pangaia", v: 42}, {n: "Rare (Spray)", v: 0}, {n: "Reuni", v: 40}, 
        {n: "Sensia", v: 45}, {n: "Sphera Joy", v: 42}, {n: "UB Super", v: 52}, 
        {n: "USAHemp", v: 43}, {n: "Valtellinamed", v: 40}, {n: "Outros (Padr√£o)", v: 40}
    ];

    function init() {
        document.querySelectorAll('.brand-list').forEach(select => {
            select.innerHTML = "";
            brands.sort((a,b) => a.n.localeCompare(b.n)).forEach(b => {
                let o = document.createElement('option');
                o.value = b.v; o.text = b.n + (b.v==0 ? " (Spray)" : ` (${b.v} gts/ml)`);
                select.add(o);
            });
        });
    }
    init();

    function switchTab(i) {
        document.querySelectorAll('.tab').forEach((t, idx) => t.classList.toggle('active', idx === i));
        document.querySelectorAll('.tab-content').forEach((c, idx) => c.style.display = (idx === i ? 'block' : 'none'));
    }

    function calcStock() {
        const gtsMl = parseFloat(document.getElementById('e_brand').value), vol = parseFloat(document.getElementById('e_vol').value), qty = parseFloat(document.getElementById('e_qty').value), dose = parseFloat(document.getElementById('e_dose').value), unit = document.getElementById('e_unit').value, freq = parseFloat(document.getElementById('e_freq').value), start = document.getElementById('e_date_start').value;
        if(!dose || !start) return alert("Preencha a dose e data!");
        let days = (gtsMl === 0) ? (75 * qty) / (dose * freq) : (vol * gtsMl * qty) / ((unit === 'gts' ? dose : dose * gtsMl) * freq);
        let dEnd = new Date(start); dEnd.setDate(dEnd.getDate() + Math.floor(days));
        let dAlert = new Date(dEnd); dAlert.setDate(dAlert.getDate() - 45);
        const r = document.getElementById('res_stock');
        r.innerHTML = `<div class="res-title">üìä Resumo do Estoque</div>Dura√ß√£o: <b>${Math.floor(days)} dias</b><br>Fim: <span class="res-value">${dEnd.toLocaleDateString('pt-BR')}</span><div class="alerta-container">üîî AVISAR EM: ${dAlert.toLocaleDateString('pt-BR')}</div>`;
        r.style.display = 'block';
    }

    function calcDoseA() {
        const gtsMl = parseFloat(document.getElementById('d_brand').value), mgt = parseFloat(document.getElementById('d_mgt').value), vol = parseFloat(document.getElementById('d_vol').value), pres = parseFloat(document.getElementById('d_pres_mg').value);
        if(!mgt || !vol || !pres) return alert("Preencha todos os campos da Op√ß√£o A!");
        const r = document.getElementById('res_dose_a');
        const mgMl = mgt / vol;
        const doseMl = pres / mgMl;
        if (gtsMl === 0) { 
            let s = pres / (mgt / 75); 
            r.innerHTML = `<div class="res-title">Dose Sugerida</div><span class="res-value">${s.toFixed(1)} Sprays</span>`; 
        } else { 
            let g = doseMl * gtsMl;
            r.innerHTML = `<div class="res-title">Dose Sugerida</div><span class="res-value">${g.toFixed(1)} Gotas</span><br><small>Equivale a ${doseMl.toFixed(2)} ml</small>`; 
        }
        r.style.display = 'block';
    }

    function calcDoseB() {
        const gtsMl = parseFloat(document.getElementById('d_brand').value), mgt = parseFloat(document.getElementById('d_mgt').value), vol = parseFloat(document.getElementById('d_vol').value), qty = parseFloat(document.getElementById('d_qty_take').value), unit = document.getElementById('d_unit_take').value;
        if(!mgt || !vol || !qty) return alert("Preencha todos os campos da Op√ß√£o B!");
        const r = document.getElementById('res_dose_b');
        const mgMl = mgt / vol;
        let mgTotal = 0;
        if (unit === 'ml') { mgTotal = qty * mgMl; } 
        else { mgTotal = (qty / (gtsMl || 75)) * mgMl; }
        r.innerHTML = `<div class="res-title">Resultado</div>Essa dose cont√©m:<br><span class="res-value">${mgTotal.toFixed(1)} mg</span>`;
        r.style.display = 'block';
    }
</script>
</body>
</html>
