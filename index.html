<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CannaCare - GestÃ£o Profissional</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #4a148c; --secondary: #7b1fa2; --accent-orange: #ff9800; --accent-green: #43a047; --bg-body: #f4f7f6; --text-main: #333; --white: #ffffff; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-body); margin: 0; display: flex; justify-content: center; color: var(--text-main); }
        .app-container { width: 100%; max-width: 480px; background: var(--white); min-height: 100vh; box-shadow: 0 10px 30px rgba(0,0,0,0.1); display: flex; flex-direction: column; }
        .app-header { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 30px 20px; text-align: center; border-bottom-left-radius: 25px; border-bottom-right-radius: 25px; }
        .app-header h1 { margin: 0; font-size: 24px; letter-spacing: 1px; }
        .app-header p { margin: 5px 0 0; font-size: 14px; opacity: 0.9; }
        .tab-bar { display: flex; margin: -20px 20px 10px; background: #eee; border-radius: 12px; padding: 5px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .tab { flex: 1; padding: 12px; text-align: center; cursor: pointer; border-radius: 10px; font-size: 14px; font-weight: 600; color: #666; transition: 0.3s; }
        .tab.active { background: var(--white); color: var(--primary); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .content { padding: 20px; flex-grow: 1; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .card { background: #fdfdfd; border: 1px solid #eee; border-radius: 15px; padding: 15px; margin-bottom: 20px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 12px; color: #777; text-transform: uppercase; }
        select, input { width: 100%; padding: 14px; border: 1.5px solid #eee; border-radius: 10px; font-size: 15px; background: #fff; color: #333; outline: none; }
        .row { display: flex; gap: 10px; }
        .row > div { flex: 1; }
        .btn { width: 100%; padding: 16px; border: none; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; transition: 0.3s; color: white; }
        .btn-orange { background: var(--accent-orange); }
        .btn-green { background: var(--accent-green); }
        .result-box { margin-top: 25px; padding: 20px; border-radius: 15px; display: none; }
        .res-stock { background: #fff8e1; border: 1px solid #ffe082; }
        .res-dose { background: #e8f5e9; border: 1px solid #c8e6c9; }
        .res-title { font-weight: 700; font-size: 18px; margin-bottom: 10px; color: #333; }
        .res-date { font-size: 20px; color: var(--primary); font-weight: 800; }
        .alerta-container { margin-top: 15px; padding: 12px; background: #ffebee; border-radius: 10px; border: 1px dashed #ef5350; color: #c62828; font-weight: bold; text-align: center; }
    </style>
</head>
<body>
<div class="app-container">
    <div class="app-header">
        <h1>CannaCare</h1>
        <p>InteligÃªncia em Dosagem â€¢ 2026</p>
    </div>
    <div class="tab-bar">
        <div class="tab active" onclick="switchTab(0)">ðŸ“¦ ESTOQUE</div>
        <div class="tab" onclick="switchTab(1)">ðŸ’§ DOSAGEM</div>
    </div>
    <div class="content">
        <div id="tab0" class="tab-content active">
            <div class="card">
                <div class="input-group"><label>Marca</label><select class="brand-list" id="e_brand"></select></div>
                <div class="input-group"><label>Data de InÃ­cio</label><input type="date" id="e_date_start"></div>
                <div class="row">
                    <div class="input-group"><label>Vol. (ml)</label><input type="number" id="e_vol" value="30"></div>
                    <div class="input-group"><label>Qtd Frascos</label><input type="number" id="e_qty" value="1"></div>
                </div>
                <div class="row">
                    <div class="input-group" style="flex:2"><label>Dose por Vez</label><input type="number" id="e_dose" placeholder="Ex: 10"></div>
                    <div class="input-group"><label>Unid.</label><select id="e_unit"><option value="gts">Gts</option><option value="ml">ml</option></select></div>
                </div>
                <div class="input-group"><label>Vezes ao dia</label><input type="number" id="e_freq" value="2"></div>
            </div>
            <button class="btn btn-orange" onclick="calcStock()">CALCULAR RECOMPRA</button>
            <div id="res_stock" class="result-box res-stock"></div>
        </div>
        <div id="tab1" class="tab-content">
            <div class="card">
                <div class="input-group"><label>Produto</label><select class="brand-list" id="d_brand"></select></div>
                <div class="row">
                    <div class="input-group"><label>Conc. Total (mg)</label><input type="number" id="d_mgt" placeholder="3000"></div>
                    <div class="input-group"><label>Vol. (ml)</label><input type="number" id="d_vol" value="30"></div>
                </div>
                <div class="input-group"><label>PrescriÃ§Ã£o Alvo (mg)</label><input type="number" id="d_pres" placeholder="Dose em mg"></div>
            </div>
            <button class="btn btn-green" onclick="calcDose()">CALCULAR GOTAS</button>
            <div id="res_dose" class="result-box res-dose"></div>
        </div>
    </div>
</div>
<script>
    const brands = [
        {n: "Allandiol (15ml)", v: 40}, {n: "Allandiol (30ml)", v: 30}, {n: "ALMA LAB", v: 40},
        {n: "Bcure", v: 50}, {n: "Canna River", v: 47}, {n: "CbdMD", v: 43}, 
        {n: "HempMeds RSHO 9", v: 33}, {n: "HempMeds BR 3k", v: 45}, {n: "HempMeds BR 6k", v: 50},
        {n: "HempMeds X Isolado", v: 50}, {n: "Lazarus", v: 38}, {n: "LeafMed", v: 54},
        {n: "Rare (Spray)", v: 0}, {n: "UB Super", v: 52}, {n: "USAHemp", v: 43}
    ];
    document.querySelectorAll('.brand-list').forEach(s => {
        brands.forEach(b => {
            let o = document.createElement('option');
            o.value = b.v; o.text = b.n + (b.v==0 ? " (Spray)" : ` (${b.v} gts/ml)`);
            s.add(o);
        });
    });
    function switchTab(i) {
        document.querySelectorAll('.tab').forEach((t, idx) => t.classList.toggle('active', idx === i));
        document.querySelectorAll('.tab-content').forEach((c, idx) => c.classList.toggle('active', idx === i));
        document.getElementById('tab0').style.display = i === 0 ? 'block' : 'none';
        document.getElementById('tab1').style.display = i === 1 ? 'block' : 'none';
    }
    function calcStock() {
        const gtsMl = parseFloat(document.getElementById('e_brand').value), vol = parseFloat(document.getElementById('e_vol').value), qty = parseFloat(document.getElementById('e_qty').value), dose = parseFloat(document.getElementById('e_dose').value), unit = document.getElementById('e_unit').value, freq = parseFloat(document.getElementById('e_freq').value), start = document.getElementById('e_date_start').value;
        if(!dose || !start) return alert("Preencha a dose e data!");
        let days = (gtsMl === 0) ? (75 * qty) / (dose * freq) : (vol * gtsMl * qty) / ((unit === 'gts' ? dose : dose * gtsMl) * freq);
        let dEnd = new Date(start); dEnd.setDate(dEnd.getDate() + Math.floor(days) + 1);
        let dAlert = new Date(dEnd); dAlert.setDate(dAlert.getDate() - 45);
        const r = document.getElementById('res_stock');
        r.innerHTML = `<div class="res-title">ðŸ“Š Resumo do Estoque</div>DuraÃ§Ã£o: <b>${Math.floor(days)} dias</b><br>Fim do Frasco: <span class="res-date">${dEnd.toLocaleDateString('pt-BR')}</span><div class="alerta-container">ðŸ”” AVISAR EM: ${dAlert.toLocaleDateString('pt-BR')}</div>`;
        r.style.display = 'block';
    }
    function calcDose() {
        const gtsMl = parseFloat(document.getElementById('d_brand').value), mgt = parseFloat(document.getElementById('d_mgt').value), vol = parseFloat(document.getElementById('d_vol').value), pres = parseFloat(document.getElementById('d_pres').value);
        if(!mgt || !pres) return alert("Preencha mg e prescriÃ§Ã£o!");
        const r = document.getElementById('res_dose');
        if (gtsMl === 0) { let s = pres / (mgt / 75); r.innerHTML = `<div class="res-title">ðŸ’§ Dose Sugerida</div><span class="res-date">${s.toFixed(1)} Sprays</span>`; }
        else { let g = pres / ((mgt / vol) / gtsMl); r.innerHTML = `<div class="res-title">ðŸ’§ Dose Sugerida</div><span class="res-date">${g.toFixed(1)} Gotas</span><br><small>Equivale a ${(pres/(mgt/vol)).toFixed(2)} ml</small>`; }
        r.style.display = 'block';
    }
</script>
</body>
</html>
